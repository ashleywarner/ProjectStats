<!doctype html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{total_count}} Repositories</title>

    <!-- Add to homescreen -->
    <link rel="manifest" href="manifest.json">

    <!-- Fallback to homescreen for Chrome <39 on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Web Starter Kit">
    <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Web Starter Kit">
    <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <meta name="theme-color" content="#3372DF">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    <!-- Page styles -->
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
<section>
    <div class="container">
        <h1 id="headline">
            <strong>{{commit_count}}</strong> Commits<br/>
            <strong>{{active_count}}</strong> Repositories
        </h1>
    </div>
<!--</section>-->
<!--<section>-->
    <div class="container">
        <h2 class="subsection-title">Commits by Developer</h2>
        <div class="container-small" id="bar-example"></div>
    </div>
</section>
<section>
    <div class="container">
        <div class="g--third"><div id="repo_type"></div></div>
        <div class="g--third"><div id="active_chart"></div></div>
        <div class="g--third g--last"><div id="languages_chart"></div></div>
    </div>
</section>
<section>
    <div class="container calendar">
<link rel="stylesheet" href="styles/morris.css">
<script src="scripts/jquery-2.1.4.min.js"></script>
<script src="scripts/raphael-min.js"></script>
<script src="scripts/morris.min.js"></script>
<script src="scripts/moment.min.js"></script>

<script>
    Morris.Bar({
        element: 'bar-example',
        data: [{% for user in user_counts %}
            {developer:'{{ loop.key }}', commits:{{user}}},
        {% endfor %}],
        xkey: 'developer',
        ykeys: ['commits'],
        labels:['Developer']
    });

    Morris.Pie({
        element: 'repo_type',
        data: [
            {label: "Git", value: {{git_count}}},
            {label: "Mercurial", value: {{hg_count}}}
        ]
    });

    Morris.Pie({
        element: 'active_chart',
        data: [
            {label: "Active", value: {{active_count}}},
            {label: "Inactive", value: {{total_count - active_count}}}
        ]
    });

    Morris.Pie({
        element: 'languages_chart',
        data: [{% for lang in languages %}
            {label: "{{loop.key}}", value: {{lang}}},
    {% endfor %}]
    });
</script>

<!-- build:js scripts/main.min.js -->
<!--<script src="scripts/main.js"></script>-->
<!-- endbuild -->

<style>

    body {
        font: 10px sans-serif;
        shape-rendering: crispEdges;
    }

    .day {
        fill: #fff;
        stroke: #ccc;
    }

    .month {
        fill: none;
        stroke: #000;
        stroke-width: 2px;
    }

    .RdYlGn .q0-11{fill:rgb(165,0,38)}
    .RdYlGn .q1-11{fill:rgb(215,48,39)}
    .RdYlGn .q2-11{fill:rgb(244,109,67)}
    .RdYlGn .q3-11{fill:rgb(253,174,97)}
    .RdYlGn .q4-11{fill:rgb(254,224,139)}
    .RdYlGn .q5-11{fill:rgb(255,255,191)}
    .RdYlGn .q6-11{fill:rgb(217,239,139)}
    .RdYlGn .q7-11{fill:rgb(166,217,106)}
    .RdYlGn .q8-11{fill:rgb(102,189,99)}
    .RdYlGn .q9-11{fill:rgb(26,152,80)}
    .RdYlGn .q10-11{fill:rgb(0,104,55)}

</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script>

    var commitsByDate = {{JSON.stringify(date_information)}};

    var width = 960,
            height = 136,
            cellSize = 17; // cell size

    var percent = d3.format(".1%"),
            format = d3.time.format("%Y-%m-%d");

    var color = d3.scale.quantize()
            .domain([0, 1])
            .range(d3.range(11).map(function(d) { return "q" + d + "-11"; }));

    var svg = d3.select(".container.calendar").selectAll("svg")
            .data(d3.range(2015, 2016))
            .enter().append("svg")
            .attr("width", "100%")
            .attr("viewBox", "0 0 " + width + " " + height)
            .attr("height", height)
            .attr("class", "RdYlGn")
            .append("g")
            .attr("transform", "translate(" + ((width - cellSize * 53) / 2) + "," + (height - cellSize * 7 - 1) + ")");

    svg.append("text")
            .attr("transform", "translate(-6," + cellSize * 3.5 + ")rotate(-90)")
            .style("text-anchor", "middle")
            .text(function(d) { return d; });

    var rect = svg.selectAll(".day")
            .data(function(d) { return d3.time.days(new Date(d, 0, 1), new Date(d + 1, 0, 1)); })
            .enter().append("rect")
            .attr("class", "day")
            .attr("width", cellSize)
            .attr("height", cellSize)
            .attr("x", function(d) { return d3.time.weekOfYear(d) * cellSize; })
            .attr("y", function(d) { return d.getDay() * cellSize; })
            .datum(format);

    rect.append("title")
            .text(function(d) { return d; });

    svg.selectAll(".month")
            .data(function(d) { return d3.time.months(new Date(d, 0, 1), new Date(d + 1, 0, 1)); })
            .enter().append("path")
            .attr("class", "month")
            .attr("d", monthPath);

    var maxValue = 0;
    for(var day in commitsByDate){
        if(commitsByDate[day] > maxValue){
            maxValue = commitsByDate[day];
        }
    }

    var data = commitsByDate;
    rect.filter(function (d) {
        return d in data;
    })
    .attr("class", function (d) {
        return "day " + color(data[d]/maxValue);
    })
    .select("title")
    .text(function (d) {
        return moment(new Date(d)).format("dddd, MMMM Do YYYY") + ": " + data[d] + " commits";
    });

    function monthPath(t0) {
        var t1 = new Date(t0.getFullYear(), t0.getMonth() + 1, 0),
                d0 = t0.getDay(), w0 = d3.time.weekOfYear(t0),
                d1 = t1.getDay(), w1 = d3.time.weekOfYear(t1);
        return "M" + (w0 + 1) * cellSize + "," + d0 * cellSize
                + "H" + w0 * cellSize + "V" + 7 * cellSize
                + "H" + w1 * cellSize + "V" + (d1 + 1) * cellSize
                + "H" + (w1 + 1) * cellSize + "V" + 0
                + "H" + (w0 + 1) * cellSize + "Z";
    }

    d3.select(self.frameElement).style("height", "2910px");

</script>
    </div>
</section>
<!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
<script>
    /*(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     ga('create', 'UA-XXXXX-X', 'auto');
     ga('send', 'pageview');*/
</script>
<!-- Built with love using Web Starter Kit -->
</body>
</html>
